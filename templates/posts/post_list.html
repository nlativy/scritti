{% extends "posts/base.html" %}

{% block content %}
    {% if posts.object_list %}
        {% for post in posts.object_list %}
            <div class="post">
                <h2><a href="{{post.get_absolute_url}}">{{post.title}}</a></h2>
                <div class="info">
                    <span class="date">Published: {{post.pub_date|date:"j F Y \a\t H:i T"}}</span>
                    <span class="details"><a href="{{post.get_absolute_url}}">Comments</a></span>
                </div>
                <div class="content">
                {{post.body_html|safe}}
                </div>
                <div class="meta">
                {% if post.get_tags %}
                Tagged: 
                {% for tag in post.get_tags %}
                    <!-- TODO: do not have tag URL hardcoded here -->
                    <a href="/tag/{{tag.name}}">{{tag.name}}</a>{% if not forloop.last %}, {%endif%}
                {%endfor%}
                {% else %}
                Not tagged.
                {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No posts</p>
    {% endif %}
{% endblock %}

{% block widgets %}
    <div class="widget">
        <h3>Recent posts</h3>
        {% if posts.object_list %}
            <ul>
            {% for post in posts.object_list %}
                <li><a href="{{post.get_absolute_url}}">{{post.title}}</a></li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No posts</p>
        {% endif %}
    </div>
    <div class="widget">
        <h3>Links</h3>
        <ul>
        <li><a href="fake">My photos</a></li>
        <li><a href="fake">My Facebook</a></li>
        <li><a href="fake">My Last.fm</a></li>
        <li><a href="fake">My Wishlist</a></li>
        <li><a href="fake">Source code</a></li>
        </ul>
    </div>
    <div class="widget">
        <h3>Recent tweets</h3>
        <p>Twitter activity goes here</p>
    </div>
{% endblock %}

{% block pagination %}
    {% if posts.has_other_pages %}
    <div class="pagination">
    {% if posts.has_previous %}
    <span class="prev">
    <a href="{% url index_page posts.previous_page_number %}">&lt; newer entries</a>
    </span>
    {% endif %}
    {% if posts.has_next %}
    <span class="next">
    <a href="{% url index_page posts.next_page_number %}">older entries &gt;</a>
    </span>
    {% endif %}
    </div>
    {% endif %}
{% endblock %}
